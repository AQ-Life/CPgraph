---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# gmtplot

<!-- badges: start -->

<!-- badges: end -->

The goal of gmtplot is to draw GMT (Geometric Mean Titer) plot in immunogenicity in vaccine clinical trials. Please refer to [Generation of Geometric Mean Titer Plot in Immunogenicity from SAS and R](https://www.lexjansen.com/pharmasug-cn/2023/CC/Pharmasug-China-2023-CC115.pdf) from PharmaSUG.

## Installation

You can install the development version of gmtplot from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("AQ-Life/gmtplot")
```

## Example

This is a basic example which shows you how to solve a common problem:

```{r example}
library(gmtplot)
library(haven)

adis <- read_sas("adis.sas7bdat")

adis <- adis %>% 
  dplyr::filter(IPPSFL == "Y", PARAMCD == "SAR2NAB", ANL01FL == "Y") %>% 
  mutate(Gvar = if_else(COHORT == "Cohort 2",TRTAN+2, TRTAN),
         AVISITN = if_else(AVISITN == 42, 28, AVISITN))

gmtplot(datain = adis,
        GrpVar = adis$Gvar,
        GrpLabel = c("Group A", "Group B", "Group C", "Group D"),
        AvisitnVar = adis$AVISITN,
        AvisintVal = c(0, 28),
        AvisitLabel = c("D0", "D28"),
        Aval = adis$AVAL,
        Base = adis$BASE,
        YLabel = "PRNT50",
        LegendLabel = c(),
        colorSet = c("grey", "blue", "grey", "blue"),
        # LineYN = TRUE,
        # LegendYN = TRUE,
        FigureName = "gmt_plot")
```

## Additional Requirements

The parameter “datain” from "gmtplot" function needs to generated per ADaM IG and includes main variables that will be used are listed as below.

| Variable | Label                     |
|----------|---------------------------|
| USUBJID  | Unique Subject Identifier |
| TRTAN    | Actual Treatment (N)      |
| AVISITN  | Analysis Visit (N)        |
| AVAL     | Analysis Value            |
| BASE     | Baseline Value            |
