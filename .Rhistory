GrpVar = adis2$GVAR,
GrpLabel = c("< 40岁", "40-49岁", ">=50岁"),
AvisitnVar = adis2$AVISITN,
AvisintVal = c(0, 30),
AvisitLabel = c("D0", "D30"),
Aval = adis2$AVAL,
Base = adis2$BASE,
YLabel = "PRNT50 Titer",
LegendLabel = c(),
colorSet = c("grey", "blue", "red"),
LineYN = TRUE,
LegendYN = FALSE,
FigureName = "IGGGE")
warnings()
devtools::document()
load_all()
gmtplot(datain = adis2,
GrpVar = adis2$GVAR,
GrpLabel = c("< 40岁", "40-49岁", ">=50岁"),
AvisitnVar = adis2$AVISITN,
AvisintVal = c(0, 30),
AvisitLabel = c("D0", "D30"),
Aval = adis2$AVAL,
Base = adis2$BASE,
YLabel = "PRNT50 Titer",
LegendLabel = c(),
colorSet = c("grey", "blue", "red"),
LineYN = TRUE,
LegendYN = FALSE,
FigureName = "IGGGE")
warnings()
devtools::document()
load_all()
gmtplot(datain = adis2,
GrpVar = adis2$GVAR,
GrpLabel = c("< 40岁", "40-49岁", ">=50岁"),
AvisitnVar = adis2$AVISITN,
AvisintVal = c(0, 30),
AvisitLabel = c("D0", "D30"),
Aval = adis2$AVAL,
Base = adis2$BASE,
YLabel = "PRNT50 Titer",
LegendLabel = c(),
colorSet = c("grey", "blue", "red"),
LineYN = TRUE,
LegendYN = FALSE,
FigureName = "IGGGE")
devtools::document()
load_all()
devtools::build()
devtools::document()
load_all()
library(devtools)
devtools::document()
load_all()
devtools::build()
rm(list = ls())
options(digits = 4)
library(haven)
library(devtools)
library(dplyr)
setwd(dir = "D:/360Downloads/R/project/GMT/GMTPackage/gmtplot")
devtools::document()
load_all()
adis <- read_sas("adis.sas7bdat")
adis <- adis %>%
dplyr::filter(IFASFL == "Y", PARAMCD == "SAR2NAB", ANL01FL == "Y", AVISITN %in% c(0,28,42)) %>%
mutate(Gvar = if_else(COHORT == "Cohort 2", TRTAN+2, TRTAN),
AVISITN = if_else(AVISITN == 42, 28, AVISITN),
AVISITN = if_else(AVISITN == 150, 120, AVISITN),
AVISITN = if_else(AVISITN == 178, 148, AVISITN)) %>%
filter(Gvar %in% c(1,2,3))
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("G是 的", "Group B", "C"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 28),
AvisitLabel = c("D0", "D28"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue", "red"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
setwd(dir = "D:/360Downloads/R/project/GMT/GMTPackage/gmtplot")
devtools::document()
load_all()
adis <- read_sas("adis.sas7bdat")
adis <- adis %>%
dplyr::filter(IFASFL == "Y", PARAMCD == "SAR2NAB", ANL01FL == "Y", AVISITN %in% c(0,28,42)) %>%
mutate(Gvar = if_else(COHORT == "Cohort 2", TRTAN+2, TRTAN),
AVISITN = if_else(AVISITN == 42, 28, AVISITN),
AVISITN = if_else(AVISITN == 150, 120, AVISITN),
AVISITN = if_else(AVISITN == 178, 148, AVISITN)) %>%
filter(Gvar %in% c(1,2,3))
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("G是 的", "Group B", "C"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 28),
AvisitLabel = c("D0", "D28"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue", "red"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
devtools::build()
devtools::document()
load_all()
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("G是 的", "Group B", "C"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 28),
AvisitLabel = c("D0", "D28"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue", "red"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
devtools::build()
rm(list = ls())
options(digits = 4)
library(haven)
library(devtools)
library(dplyr)
setwd(dir = "D:/360Downloads/R/project/GMT/GMTPackage/gmtplot")
devtools::document()
load_all()
adis <- read_sas("adis.sas7bdat")
adis <- adis %>%
dplyr::filter(IFASFL == "Y", PARAMCD == "SAR2NAB", ANL01FL == "Y", AVISITN %in% c(0,28,42)) %>%
mutate(Gvar = if_else(COHORT == "Cohort 2", TRTAN+2, TRTAN),
AVISITN = if_else(AVISITN == 42, 28, AVISITN),
AVISITN = if_else(AVISITN == 150, 120, AVISITN),
AVISITN = if_else(AVISITN == 178, 148, AVISITN)) %>%
filter(Gvar %in% c(1,2,3))
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("G", "Group B", "C"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 28),
AvisitLabel = c("D0", "D28"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue", "red"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
max(adis1$AVAL)
ceiling(max(adis1$AVAL)/10)*10
devtools::document()
load_all()
adis <- read_sas("adis.sas7bdat")
adis <- adis %>%
dplyr::filter(IFASFL == "Y", PARAMCD == "SAR2NAB", ANL01FL == "Y", AVISITN %in% c(0,28,42)) %>%
mutate(Gvar = if_else(COHORT == "Cohort 2", TRTAN+2, TRTAN),
AVISITN = if_else(AVISITN == 42, 28, AVISITN),
AVISITN = if_else(AVISITN == 150, 120, AVISITN),
AVISITN = if_else(AVISITN == 178, 148, AVISITN)) %>%
filter(Gvar %in% c(1,2,3))
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("G", "Group B", "C"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 28),
AvisitLabel = c("D0", "D28"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue", "red"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
rlang::last_trace()
devtools::document()
load_all()
adis <- read_sas("adis.sas7bdat")
adis <- adis %>%
dplyr::filter(IFASFL == "Y", PARAMCD == "SAR2NAB", ANL01FL == "Y", AVISITN %in% c(0,28,42)) %>%
mutate(Gvar = if_else(COHORT == "Cohort 2", TRTAN+2, TRTAN),
AVISITN = if_else(AVISITN == 42, 28, AVISITN),
AVISITN = if_else(AVISITN == 150, 120, AVISITN),
AVISITN = if_else(AVISITN == 178, 148, AVISITN)) %>%
filter(Gvar %in% c(1,2,3))
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("G", "Group B", "C"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 28),
AvisitLabel = c("D0", "D28"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue", "red"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
View(final)
setwd(dir = "D:/360Downloads/R/project/GMT/GMTPackage/gmtplot")
devtools::document()
load_all()
adis <- read_sas("adis.sas7bdat")
adis <- adis %>%
dplyr::filter(IFASFL == "Y", PARAMCD == "IFN", ANL01FL == "Y", AVISITN %in% c(0,7)) %>%
mutate(Gvar = if_else(COHORTN == 2, TRTAN+2, TRTAN),
AVISITN = if_else(AVISITN == 42, 28, AVISITN),
AVISITN = if_else(AVISITN == 150, 120, AVISITN),
AVISITN = if_else(AVISITN == 178, 148, AVISITN)) %>%
filter(Gvar %in% c(1,2,3))
adis <- adis %>%
dplyr::filter(IFAS == "是", PARAMCD == "IFN", ANL01FL == "Y", AVISITN %in% c(0,7)) %>%
mutate(Gvar = if_else(COHORTN == 2, TRTAN+2, TRTAN),
AVISITN = if_else(AVISITN == 42, 28, AVISITN),
AVISITN = if_else(AVISITN == 150, 120, AVISITN),
AVISITN = if_else(AVISITN == 178, 148, AVISITN)) %>%
filter(Gvar %in% c(1,2,3))
adis <- adis %>%
dplyr::filter(IFAS == "是", PARAMCD == "IFN", ANL01FL == "是", AVISITN %in% c(0,7)) %>%
mutate(Gvar = if_else(COHORTN == 2, TRTAN+2, TRTAN),
AVISITN = if_else(AVISITN == 42, 28, AVISITN),
AVISITN = if_else(AVISITN == 150, 120, AVISITN),
AVISITN = if_else(AVISITN == 178, 148, AVISITN)) %>%
filter(Gvar %in% c(1,2,3))
adis <- read_sas("adis.sas7bdat")
adis <- adis %>%
dplyr::filter(IFAS == "是", PARAMCD == "IFN", ANL01FL == "是", AVISITN %in% c(0,7))
adis <- adis %>%
dplyr::filter(IFAS == "是", PARAMCD == "IFN", ANL01FL == "是", AVISITN %in% c(0,7)) %>%
mutate(Gvar = if_else(COHORTN == 3, TRTAN+2, TRTAN),
AVISITN = if_else(AVISITN == 42, 28, AVISITN),
AVISITN = if_else(AVISITN == 150, 120, AVISITN),
AVISITN = if_else(AVISITN == 178, 148, AVISITN)) %>%
filter(Gvar %in% c(1,2,3))
View(adis)
adis <- adis %>%
dplyr::filter(IFAS == "是", PARAMCD == "IFN", ANL01FL == "是", AVISITN %in% c(0,7)) %>%
mutate(Gvar = if_else(AGE>=60, 3, TRTAN),
AVISITN = if_else(AVISITN == 42, 28, AVISITN),
AVISITN = if_else(AVISITN == 150, 120, AVISITN),
AVISITN = if_else(AVISITN == 178, 148, AVISITN)) %>%
filter(Gvar %in% c(1,2,3))
View(adis)
adis <- adis %>%
dplyr::filter(IFAS == "是", PARAMCD == "IFN", ANL01FL == "是", AVISITN %in% c(0,7)) %>%
mutate(Gvar = if_else(AGE>=48, 3, TRTAN),
AVISITN = if_else(AVISITN == 42, 28, AVISITN),
AVISITN = if_else(AVISITN == 150, 120, AVISITN),
AVISITN = if_else(AVISITN == 178, 148, AVISITN)) %>%
filter(Gvar %in% c(1,2,3))
View(adis)
adis <- adis %>%
dplyr::filter(IFAS == "是", PARAMCD == "IFN", ANL01FL == "是", AVISITN %in% c(0,7)) %>%
mutate(Gvar = if_else(AGE>=48, 3, TRTAN),
AVISITN = if_else(AVISITN == 42, 28, AVISITN),
AVISITN = if_else(AVISITN == 150, 120, AVISITN),
AVISITN = if_else(AVISITN == 178, 148, AVISITN)) %>%
filter(Gvar %in% c(1,2,3))
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("G", "Group B", "C"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 28),
AvisitLabel = c("D0", "D28"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue", "red"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
View(final)
View(adis1)
load_all()
adis <- read_sas("adis.sas7bdat")
adis <- adis %>%
dplyr::filter(IFAS == "是", PARAMCD == "IFN", ANL01FL == "是", AVISITN %in% c(0,90)) %>%
mutate(Gvar = if_else(AGE>=48, 3, TRTAN),
AVISITN = if_else(AVISITN == 42, 28, AVISITN),
AVISITN = if_else(AVISITN == 150, 120, AVISITN),
AVISITN = if_else(AVISITN == 178, 148, AVISITN)) %>%
filter(Gvar %in% c(1,2,3))
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("G", "Group B", "C"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 28),
AvisitLabel = c("D0", "D28"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue", "red"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
View(final)
adis <- adis %>%
dplyr::filter(IFAS == "是", PARAMCD == "IFN", ANL01FL == "是", AVISITN %in% c(0,90)) %>%
mutate(Gvar = if_else(AGE>=48, 3, TRTAN)) %>%
filter(Gvar %in% c(1,2,3))
devtools::document()
load_all()
adis <- read_sas("adis.sas7bdat")
adis <- adis %>%
dplyr::filter(IFAS == "是", PARAMCD == "IFN", ANL01FL == "是", AVISITN %in% c(0,90)) %>%
mutate(Gvar = if_else(AGE>=48, 3, TRTAN)) %>%
filter(Gvar %in% c(1,2,3))
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("G", "Group B", "C"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 90),
AvisitLabel = c("D0", "D90"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue", "red"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
View(final)
final$FOLD
View(mean1)
View(adis2)
mean(adis2$FOLD)
adis2$FOLD
View(adis2)
adis <- adis %>%
dplyr::filter(IFAS == "是", PARAMCD == "IFN", ANL01FL == "是", AVISITN %in% c(0,90)) %>%
mutate(Gvar = if_else(AGE>=48, 3, TRTAN),
BASE = if_else(BASE == 0, 1, BASE),
AVAL = if_else(AVAL == 0, 1, AVAL)) %>%
filter(Gvar %in% c(1,2,3))
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("G", "Group B", "C"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 90),
AvisitLabel = c("D0", "D90"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue", "red"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
View(mean1)
devtools::document()
load_all()
adis <- read_sas("adis.sas7bdat")
adis <- adis %>%
dplyr::filter(IFAS == "是", PARAMCD == "IFN", ANL01FL == "是", AVISITN %in% c(0,90)) %>%
mutate(Gvar = if_else(AGE>=48, 3, TRTAN),
BASE = if_else(BASE == 0, 1, BASE),
AVAL = if_else(AVAL == 0, 1, AVAL)) %>%
filter(Gvar %in% c(1,2,3))
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("G", "Group B", "C"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 90),
AvisitLabel = c("D0", "D90"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue", "red"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
rlang::last_trace()
devtools::document()
load_all()
adis <- read_sas("adis.sas7bdat")
adis <- adis %>%
dplyr::filter(IFAS == "是", PARAMCD == "IFN", ANL01FL == "是", AVISITN %in% c(0,90)) %>%
mutate(Gvar = if_else(AGE>=48, 3, TRTAN),
BASE = if_else(BASE == 0, 1, BASE),
AVAL = if_else(AVAL == 0, 1, AVAL)) %>%
filter(Gvar %in% c(1,2,3))
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("G", "Group B", "C"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 90),
AvisitLabel = c("D0", "D90"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue", "red"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
View(final)
ggplot(final) +
geom_col(aes(x = Xp, y = means, fill = factor(Grp)), alpha = 0.3, na.rm = TRUE)+
geom_point(aes(x = XpDot, y = AVAL, color = factor(Grp)), na.rm = TRUE, size = 0.5)+
geom_errorbar(aes(x = Xp, ymin = yerrl, ymax = yerru))+
geom_text(aes(x = Xp, y = YaxisMax, label = as.character(round(means))), na.rm = TRUE, family = "sans", fontface = "bold", size = 4)+
geom_text(aes(x = Xp, y = 0.25, label = nlabel), na.rm = TRUE, family = "sans", fontface = "bold", size = 4)+
geom_text(aes(x = Grp, y = 0.1, label = GrpLabel), na.rm = TRUE, family = "sans", fontface = "bold", size = 4)+
geom_text(aes(x = Xp-Xfactor, y = YaxisMax+(lineheight), label = foldlabel), na.rm = TRUE, family = "sans", fontface = "bold", size = 4)+
geom_linerange(aes(x = Xp, ymin = ymin, ymax = ymax), na.rm = TRUE)+
geom_linerange(aes(xmin = xmin, xmax = xmax, y = YaxisMax+(lineheight)))+
geom_vline(xintercept = unique(jitter$Grp)[-which(unique(jitter$Grp) == max(unique(jitter$Grp)))]+0.5, linetype = "f8", alpha = 0.4)+
theme_classic()+
annotation_logticks(sides = "l")
p <- ggplot(final) +
geom_col(aes(x = Xp, y = means, fill = factor(Grp)), alpha = 0.3, na.rm = TRUE)+
geom_point(aes(x = XpDot, y = AVAL, color = factor(Grp)), na.rm = TRUE, size = 0.5)+
geom_errorbar(aes(x = Xp, ymin = yerrl, ymax = yerru))
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("G", "Group B", "C"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 90),
AvisitLabel = c("D0", "D90"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue", "red"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
devtools::document()
load_all()
adis <- read_sas("adis.sas7bdat")
adis <- adis %>%
dplyr::filter(IFAS == "是", PARAMCD == "IFN", ANL01FL == "是", AVISITN %in% c(0,90)) %>%
mutate(Gvar = if_else(AGE>=48, 3, TRTAN),
BASE = if_else(BASE == 0, 1, BASE),
AVAL = if_else(AVAL == 0, 1, AVAL)) %>%
filter(Gvar %in% c(1,2,3))
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("G", "Group B", "C"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 90),
AvisitLabel = c("D0", "D90"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue", "red"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
devtools::document()
load_all()
adis <- read_sas("adis.sas7bdat")
adis <- adis %>%
dplyr::filter(IFAS == "是", PARAMCD == "IFN", ANL01FL == "是", AVISITN %in% c(0,90)) %>%
mutate(Gvar = if_else(AGE>=48, 3, TRTAN),
BASE = if_else(BASE == 0, 1, BASE),
AVAL = if_else(AVAL == 0, 1, AVAL)) %>%
filter(Gvar %in% c(1,2,3))
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("G", "Group B", "C"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 90),
AvisitLabel = c("D0", "D90"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue", "red"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
setwd(dir = "D:/360Downloads/R/project/GMT/GMTPackage/gmtplot")
devtools::document()
load_all()
adis <- read_sas("adis.sas7bdat")
adis <- adis %>%
dplyr::filter(IFAS == "是", PARAMCD == "IFN", ANL01FL == "是", AVISITN %in% c(0,90)) %>%
mutate(Gvar = if_else(AGE>=48, 3, TRTAN),
BASE = if_else(BASE == 0, 1, BASE),
AVAL = if_else(AVAL == 0, 1, AVAL)) %>%
filter(Gvar %in% c(1,2,3))
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("G", "Group B", "C"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 90),
AvisitLabel = c("D0", "D90"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue", "red"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
