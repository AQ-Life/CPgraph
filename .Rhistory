AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 28, 120),
AvisitLabel = c("D0", "D28", "d120"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
devtools::document()
load_all()
adis <- read_sas("adis.sas7bdat")
adis <- adis %>%
dplyr::filter(IFASFL == "Y", PARAMCD == "SAR2NAB", ANL01FL == "Y", AVISITN %in% c(0,28,42,120,150)) %>%
mutate(Gvar = TRTAN,
AVISITN = if_else(AVISITN == 42, 28, AVISITN),
AVISITN = if_else(AVISITN == 150, 120, AVISITN),
AVISITN = if_else(AVISITN == 178, 148, AVISITN))
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("Group A", "Group B"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 28, 120),
AvisitLabel = c("D0", "D28", "d120"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
rm(list = ls())
devtools::document()
load_all()
adis <- read_sas("adis.sas7bdat")
adis <- adis %>%
dplyr::filter(IFASFL == "Y", PARAMCD == "SAR2NAB", ANL01FL == "Y", AVISITN %in% c(0,28,42,120,150)) %>%
mutate(Gvar = TRTAN,
AVISITN = if_else(AVISITN == 42, 28, AVISITN),
AVISITN = if_else(AVISITN == 150, 120, AVISITN),
AVISITN = if_else(AVISITN == 178, 148, AVISITN))
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("Group A", "Group B"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 28, 120),
AvisitLabel = c("D0", "D28", "d120"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
View(jitter)
View(avisitdata)
devtools::document()
load_all()
adis <- read_sas("adis.sas7bdat")
adis <- adis %>%
dplyr::filter(IFASFL == "Y", PARAMCD == "SAR2NAB", ANL01FL == "Y", AVISITN %in% c(0,28,42,120,150)) %>%
mutate(Gvar = TRTAN,
AVISITN = if_else(AVISITN == 42, 28, AVISITN),
AVISITN = if_else(AVISITN == 150, 120, AVISITN),
AVISITN = if_else(AVISITN == 178, 148, AVISITN))
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("Group A", "Group B"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 28, 120),
AvisitLabel = c("D0", "D28", "d120"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
devtools::build()
adis <- adis %>%
dplyr::filter(IFASFL == "Y", PARAMCD == "SAR2NAB", ANL01FL == "Y", AVISITN %in% c(0,28,42,120,150)) %>%
mutate(Gvar = if_else(COHORT = "Cohort 2", TRTAN+2,TRTAN),
AVISITN = if_else(AVISITN == 42, 28, AVISITN),
AVISITN = if_else(AVISITN == 150, 120, AVISITN),
AVISITN = if_else(AVISITN == 178, 148, AVISITN))
adis <- read_sas("adis.sas7bdat")
adis <- adis %>%
dplyr::filter(IFASFL == "Y", PARAMCD == "SAR2NAB", ANL01FL == "Y", AVISITN %in% c(0,28,42,120,150)) %>%
mutate(Gvar = if_else(COHORT = "Cohort 2", TRTAN+2,TRTAN),
AVISITN = if_else(AVISITN == 42, 28, AVISITN),
AVISITN = if_else(AVISITN == 150, 120, AVISITN),
AVISITN = if_else(AVISITN == 178, 148, AVISITN))
View(adis)
adis <- adis %>%
dplyr::filter(IFASFL == "Y", PARAMCD == "SAR2NAB", ANL01FL == "Y", AVISITN %in% c(0,28,42,120,150)) %>%
mutate(Gvar = if_else(COHORT == "Cohort 2", TRTAN+2, TRTAN),
AVISITN = if_else(AVISITN == 42, 28, AVISITN),
AVISITN = if_else(AVISITN == 150, 120, AVISITN),
AVISITN = if_else(AVISITN == 178, 148, AVISITN))
adis <- adis %>%
dplyr::filter(IFASFL == "Y", PARAMCD == "SAR2NAB", ANL01FL == "Y", AVISITN %in% c(0,28,42,120,150)) %>%
mutate(Gvar = if_else(COHORT == "Cohort 2", TRTAN+2, TRTAN),
AVISITN = if_else(AVISITN == 42, 28, AVISITN),
AVISITN = if_else(AVISITN == 150, 120, AVISITN),
AVISITN = if_else(AVISITN == 178, 148, AVISITN)) %>%
filter(TRTAN %in% c(1,2,3))
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("Group A", "Group B"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 28, 120),
AvisitLabel = c("D0", "D28", "d120"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("Group A", "Group B", "C"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 28, 120),
AvisitLabel = c("D0", "D28", "d120"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue", "red"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
adis <- adis %>%
dplyr::filter(IFASFL == "Y", PARAMCD == "SAR2NAB", ANL01FL == "Y", AVISITN %in% c(0,28,42,120,150)) %>%
mutate(Gvar = if_else(COHORT == "Cohort 2", TRTAN+2, TRTAN),
AVISITN = if_else(AVISITN == 42, 28, AVISITN),
AVISITN = if_else(AVISITN == 150, 120, AVISITN),
AVISITN = if_else(AVISITN == 178, 148, AVISITN)) %>%
filter(TRTAN %in% c(1,2,3))
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("Group A", "Group B", "C"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 28, 120),
AvisitLabel = c("D0", "D28", "d120"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue", "red"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
rlang::last_trace()
View(adis)
adis <- adis %>%
dplyr::filter(IFASFL == "Y", PARAMCD == "SAR2NAB", ANL01FL == "Y", AVISITN %in% c(0,28,42,120,150)) %>%
mutate(Gvar = if_else(COHORT == "Cohort 2", TRTAN+2, TRTAN),
AVISITN = if_else(AVISITN == 42, 28, AVISITN),
AVISITN = if_else(AVISITN == 150, 120, AVISITN),
AVISITN = if_else(AVISITN == 178, 148, AVISITN)) %>%
filter(Gvar %in% c(1,2,3))
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("Group A", "Group B", "C"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 28, 120),
AvisitLabel = c("D0", "D28", "d120"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue", "red"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
adis <- adis %>%
dplyr::filter(IFASFL == "Y", PARAMCD == "SAR2NAB", ANL01FL == "Y", AVISITN %in% c(0,28,42)) %>%
mutate(Gvar = if_else(COHORT == "Cohort 2", TRTAN+2, TRTAN),
AVISITN = if_else(AVISITN == 42, 28, AVISITN),
AVISITN = if_else(AVISITN == 150, 120, AVISITN),
AVISITN = if_else(AVISITN == 178, 148, AVISITN)) %>%
filter(Gvar %in% c(1,2,3))
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("Group A", "Group B", "C"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 28),
AvisitLabel = c("D0", "D28"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue", "red"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
load_all()
adis <- read_sas("adis.sas7bdat")
adis <- adis %>%
dplyr::filter(IFASFL == "Y", PARAMCD == "SAR2NAB", ANL01FL == "Y", AVISITN %in% c(0,28,42)) %>%
mutate(Gvar = if_else(COHORT == "Cohort 2", TRTAN+2, TRTAN),
AVISITN = if_else(AVISITN == 42, 28, AVISITN),
AVISITN = if_else(AVISITN == 150, 120, AVISITN),
AVISITN = if_else(AVISITN == 178, 148, AVISITN)) %>%
filter(Gvar %in% c(1,2,3))
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("Group A", "Group B", "C"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 28),
AvisitLabel = c("D0", "D28"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue", "red"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
library(devtools)
rm(list = ls())
options(digits = 4)
library(haven)
library(devtools)
library(dplyr)
devtools::document()
load_all()
adis <- read_sas("adis.sas7bdat")
adis <- adis %>%
dplyr::filter(IFASFL == "Y", PARAMCD == "SAR2NAB", ANL01FL == "Y", AVISITN %in% c(0,28,42)) %>%
mutate(Gvar = if_else(COHORT == "Cohort 2", TRTAN+2, TRTAN),
AVISITN = if_else(AVISITN == 42, 28, AVISITN),
AVISITN = if_else(AVISITN == 150, 120, AVISITN),
AVISITN = if_else(AVISITN == 178, 148, AVISITN)) %>%
filter(Gvar %in% c(1,2,3))
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("Group A", "Group B", "C"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 28),
AvisitLabel = c("D0", "D28"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue", "red"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
rm(list = ls())
options(digits = 4)
library(haven)
library(devtools)
library(dplyr)
devtools::document()
load_all()
adis <- read_sas("adis.sas7bdat")
adis <- adis %>%
dplyr::filter(IFASFL == "Y", PARAMCD == "SAR2NAB", ANL01FL == "Y", AVISITN %in% c(0,28,42)) %>%
mutate(Gvar = if_else(COHORT == "Cohort 2", TRTAN+2, TRTAN),
AVISITN = if_else(AVISITN == 42, 28, AVISITN),
AVISITN = if_else(AVISITN == 150, 120, AVISITN),
AVISITN = if_else(AVISITN == 178, 148, AVISITN)) %>%
filter(Gvar %in% c(1,2,3))
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("Group A", "Group B", "C"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 28),
AvisitLabel = c("D0", "D28"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue", "red"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
load_all()
adis <- read_sas("adis.sas7bdat")
adis <- adis %>%
dplyr::filter(IFASFL == "Y", PARAMCD == "SAR2NAB", ANL01FL == "Y", AVISITN %in% c(0,28,42)) %>%
mutate(Gvar = if_else(COHORT == "Cohort 2", TRTAN+2, TRTAN),
AVISITN = if_else(AVISITN == 42, 28, AVISITN),
AVISITN = if_else(AVISITN == 150, 120, AVISITN),
AVISITN = if_else(AVISITN == 178, 148, AVISITN)) %>%
filter(Gvar %in% c(1,2,3))
gmtplot(datain = adis,
GrpVar = adis$Gvar,
GrpLabel = c("Group A", "Group B", "C"),
AvisitnVar = adis$AVISITN,
AvisintVal = c(0, 28),
AvisitLabel = c("D0", "D28"),
Aval = adis$AVAL,
Base = adis$BASE,
YLabel = "PRNT50LLL",
LegendLabel = c("V01E","V01E-2"),
colorSet = c("grey", "blue", "red"),
LineYN = FALSE,
LegendYN = FALSE,
FigureName = "gmt_plot")
rm(list = ls())
options(digits = 4)
setwd(dir = "D:/360Downloads/R/project/GMT")
isdata <- readxl::read_excel("SCTV04-ISDATA.xlsx")
adis1 <- isdata %>%
mutate(AVAL = if_else(str_detect(ISSTRESC,pattern = "<"),
as.numeric(str_replace_all(ISSTRESC, "<", ""))/2,
as.numeric(ISSTRESC)))
base <- adis1 %>%
filter(AVISITN == 0) %>%
rename(BASE = AVAL) %>%
select(SUBJID, ARM, PARAMCD, BASE)
adis2 <- left_join(adis1, base, by = c("SUBJID", "ARM", "PARAMCD")) %>%
arrange(SUBJID, PARAMCD, AVISITN) %>%
mutate(USUBJID = SUBJID,
TRTAN = case_when(ARM == "A组" ~ 1,
ARM == "B组" ~ 2,
ARM == "C组" ~ 3,
ARM == "D组" ~ 4,
),
GVAR = case_when(AGE < 40 ~ 1,
AGE >=40 & AGE<=49 ~ 2,
AGE >=50 ~ 3,
TRUE ~ NA)) %>%
filter(TRTAN %in% c(1,2,3),
PARAMCD == "IGGGE")
library(gmtplot)
gmtplot(datain = adis2,
GrpVar = adis2$GVAR,
GrpLabel = c("< 40岁", "40-49岁", ">=50岁"),
AvisitnVar = adis2$AVISITN,
AvisintVal = c(0, 30),
AvisitLabel = c("D0", "D30"),
Aval = adis2$AVAL,
Base = adis2$BASE,
YLabel = "PRNT50 Titer",
LegendLabel = c(),
colorSet = c("grey", "blue", "red"),
LineYN = TRUE,
LegendYN = FALSE,
FigureName = "IGGGE")
devtools::document()
load_all()
setwd(dir = "D:/360Downloads/R/project/GMT/GMTPackage/gmtplot")
devtools::document()
load_all()
gmtplot(datain = adis2,
GrpVar = adis2$GVAR,
GrpLabel = c("< 40岁", "40-49岁", ">=50岁"),
AvisitnVar = adis2$AVISITN,
AvisintVal = c(0, 30),
AvisitLabel = c("D0", "D30"),
Aval = adis2$AVAL,
Base = adis2$BASE,
YLabel = "PRNT50 Titer",
LegendLabel = c(),
colorSet = c("grey", "blue", "red"),
LineYN = TRUE,
LegendYN = FALSE,
FigureName = "IGGGE")
gmtplot(datain = adis2,
GrpVar = adis2$GVAR,
GrpLabel = c("< 40岁", "40-49岁", ">=50岁"),
AvisitnVar = adis2$AVISITN,
AvisintVal = c(0, 30),
AvisitLabel = c("D0", "D30"),
Aval = adis2$AVAL,
Base = adis2$BASE,
YLabel = "PRNT50 Titer",
LegendLabel = c(),
colorSet = c("grey", "blue", "red"),
LineYN = TRUE,
LegendYN = FALSE,
FigureName = "IGGGE")
devtools::document()
load_all()
gmtplot(datain = adis2,
GrpVar = adis2$GVAR,
GrpLabel = c("< 40岁", "40-49岁", ">=50岁"),
AvisitnVar = adis2$AVISITN,
AvisintVal = c(0, 30),
AvisitLabel = c("D0", "D30"),
Aval = adis2$AVAL,
Base = adis2$BASE,
YLabel = "PRNT50 Titer",
LegendLabel = c(),
colorSet = c("grey", "blue", "red"),
LineYN = TRUE,
LegendYN = FALSE,
FigureName = "IGGGE")
windowsFonts()                      #查看字体
windowsFonts( KT=windowsFont("楷体")) #自定义字体
gmtplot(datain = adis2,
GrpVar = adis2$GVAR,
GrpLabel = c("< 40岁", "40-49岁", ">=50岁"),
AvisitnVar = adis2$AVISITN,
AvisintVal = c(0, 30),
AvisitLabel = c("D0", "D30"),
Aval = adis2$AVAL,
Base = adis2$BASE,
YLabel = "PRNT50 Titer",
LegendLabel = c(),
colorSet = c("grey", "blue", "red"),
LineYN = TRUE,
LegendYN = FALSE,
FigureName = "IGGGE")
windowsFonts()                      #查看字体
devtools::document()
load_all()
gmtplot(datain = adis2,
GrpVar = adis2$GVAR,
GrpLabel = c("< 40岁", "40-49岁", ">=50岁"),
AvisitnVar = adis2$AVISITN,
AvisintVal = c(0, 30),
AvisitLabel = c("D0", "D30"),
Aval = adis2$AVAL,
Base = adis2$BASE,
YLabel = "PRNT50 Titer",
LegendLabel = c(),
colorSet = c("grey", "blue", "red"),
LineYN = TRUE,
LegendYN = FALSE,
FigureName = "IGGGE")
devtools::document()
load_all()
gmtplot(datain = adis2,
GrpVar = adis2$GVAR,
GrpLabel = c("< 40岁", "40-49岁", ">=50岁"),
AvisitnVar = adis2$AVISITN,
AvisintVal = c(0, 30),
AvisitLabel = c("D0", "D30"),
Aval = adis2$AVAL,
Base = adis2$BASE,
YLabel = "PRNT50 Titer",
LegendLabel = c(),
colorSet = c("grey", "blue", "red"),
LineYN = TRUE,
LegendYN = FALSE,
FigureName = "IGGGE")
windowsFonts( KT=windowsFont("楷体")) #自定义字体
windowsFonts()                      #查看字体
library(sysfonts)
library(showtext) #导入字体设置包
install.packages("showtext")
library(showtext) #导入字体设置包
font_add(family = "KT", regular = "simkai.ttf")
showtext::showtext_auto()
font_add(family = "KT", regular = "simkai.ttf")
showtext::showtext_auto()
showtext::showtext_opts(dpi = 300)
devtools::document()
load_all()
gmtplot(datain = adis2,
GrpVar = adis2$GVAR,
GrpLabel = c("< 40岁", "40-49岁", ">=50岁"),
AvisitnVar = adis2$AVISITN,
AvisintVal = c(0, 30),
AvisitLabel = c("D0", "D30"),
Aval = adis2$AVAL,
Base = adis2$BASE,
YLabel = "PRNT50 Titer",
LegendLabel = c(),
colorSet = c("grey", "blue", "red"),
LineYN = TRUE,
LegendYN = FALSE,
FigureName = "IGGGE")
warnings()
devtools::document()
load_all()
gmtplot(datain = adis2,
GrpVar = adis2$GVAR,
GrpLabel = c("< 40岁", "40-49岁", ">=50岁"),
AvisitnVar = adis2$AVISITN,
AvisintVal = c(0, 30),
AvisitLabel = c("D0", "D30"),
Aval = adis2$AVAL,
Base = adis2$BASE,
YLabel = "PRNT50 Titer",
LegendLabel = c(),
colorSet = c("grey", "blue", "red"),
LineYN = TRUE,
LegendYN = FALSE,
FigureName = "IGGGE")
warnings()
devtools::document()
load_all()
gmtplot(datain = adis2,
GrpVar = adis2$GVAR,
GrpLabel = c("< 40岁", "40-49岁", ">=50岁"),
AvisitnVar = adis2$AVISITN,
AvisintVal = c(0, 30),
AvisitLabel = c("D0", "D30"),
Aval = adis2$AVAL,
Base = adis2$BASE,
YLabel = "PRNT50 Titer",
LegendLabel = c(),
colorSet = c("grey", "blue", "red"),
LineYN = TRUE,
LegendYN = FALSE,
FigureName = "IGGGE")
devtools::document()
load_all()
devtools::build()
